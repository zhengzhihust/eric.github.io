---
layout: post
title:  "元朗周报（2016.03.20~2016.03.26）"
date:   2016-03-26 19:00:51 +0800
categories: jekyll update
---
#### 元朗周报（2016.03.20~2016.03.26）

#### 本周工作内容

| 工作内容 | 优先级 | 详细说明 |
| ------------ | ------------- | ------------ |
| 消息报321大促保障 | P1  | 321大促，消息报确定大促预案、划分业务方保障优先级、维护消息报稳定运行 |
| 消息报文档总结 | P1 |输出[消息报使用与说明文档](http://gitlab.mogujie.org/trade/doc/blob/master/trade-msg/content/new-structure.md) |
| 消息报线下环境搭建 | P2  | 消息报完善从线下DB-Binlog-Pigeon-Corgi的链路的配置与线下消息报的部署，打通从线下DB到线下Corgi链路 |
| 消息报case study | P2  | 消息报总结分享运维历程 |
| 消息报支持新品接入需求 | P3  | 暴露新品信息，维护[新品API文档](http://gitlab.mogujie.org/trade/trade-msg/wikis/xinpin-api) |
| 消息报支持快抢接入需求 | P3  | 暴露快抢信息，维护[快抢API文档](http://gitlab.mogujie.org/trade/trade-msg/wikis/quick-buy-structure) |
| 消息报支持反作弊接入需求 | P3  | Order服务化暴露设备指纹信息，维护[反作弊API文档](http://gitlab.mogujie.org/trade/trade-msg/wikis/mw-tid-token) |
| 下单服务化单元测试 | P3 | 完善下单服务化虚拟下单的单元测试 |

#### 下周工作计划

| 工作内容 | 优先级 | 详细说明 |
| ------------ | ------------- | ------------ |
| SellerSolr、XDOrderSolr客户端hotfix | P1  | 问题已经定位，由于消息报消息快于DB，反查接口在请求拿到旧数据时，一次重试没有返回updated，导致客户端再次重试通过，Solr录进旧的消息，下周需要同步更新Solr服务端与Trade客户端，同步解决这个问题 |
| 新版消息报发布| P1 | 解决从库延时问题，优化日志目录结构，根据应用分组读取不同的配置文件 |
| 新版消息报方案确定案 | P2  | 与@七公，@爵士，@雪岩新版消息报确定基于事件通知的方案 |
| 下单二期开发 | P2 | 参与下单二期开发，迁移遗留的下单到新的下单服务化接口 |
| tesla转tomcat工程 | P2 | 旧版消息报进行tomcat化的项目改造 |
| 虚拟下单 | P2 | 虚拟下单接口调整，前后端联调 |

#### 一周总结与感想

1. 在业务方接入消息报的时候，发现接入过程中花费时间最多的地方是熟悉Corgi的使用，包括我的消息如何生产，业务方如何消费，消费不到如何处理，如何不影响线上Corgi业务进行二次开发等等，希望中间件Corgi可以更加全面的介绍Corgi的接入与使用方法。
2. 线下环境虽然现在很难维护起来，虽然涉及面广泛，业务团队较多，但是每个人都可以担当起维护的责任，对于以后开发的效率及发布的安全性都是有很大的好处的。消息报虽然维护起来基于线下Pigeon-线下Corgi的流程，但是为了从业务上验证其使用，也要担负起下单线下环境的维护，每个人多承担一点点，线下环境渐渐的就可以发挥生产力提升的作用了。

#### 大促保障相关

消息报为近10个反查较大的业务方制定了限流及降级的应急预案，消息报也做了相关的限流预案，经过321大促值班情况发现，消息报及相关查询业务高QPS平稳运行

#### 交易答疑汇总
